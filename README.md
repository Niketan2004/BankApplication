# üè¶ Complete Bank Management System - Spring Boot Application

## üìã Table of Contents
1. [Project Overview](#project-overview)
2. [Technologies & Concepts Used](#technologies--concepts-used)
3. [Architecture & Design Patterns](#architecture--design-patterns)
4. [Database Design](#database-design)
5. [Security Implementation](#security-implementation)
6. [API Documentation](#api-documentation)
7. [Project Structure](#project-structure)
8. [Setup Instructions](#setup-instructions)
9. [Business Logic Explained](#business-logic-explained)
10. [Error Handling](#error-handling)


---

## üéØ Project Overview

This is a **enterprise-grade Bank Management System** built using **Spring Boot 3.5.0** with **Java 21**. The application provides comprehensive banking functionalities including user registration, authentication, account management, and various transaction operations. It follows **industry best practices** and implements **secure banking operations** with proper validation and error handling.

### üöÄ Key Features
- üîê **Secure Authentication** - HTTP Basic Auth with BCrypt password encoding
- üë• **Role-Based Access Control** - USER and ADMIN roles with different permissions
- üè¶ **Account Management** - Automatic account creation with sequential account numbers
- üí∞ **Transaction Operations** - Deposit, Withdraw, Transfer with proper validations
- üìä **Transaction History** - Paginated transaction records
- üõ°Ô∏è **Security** - Input validation, access control, and secure endpoints
- üìà **Scalable Architecture** - Layered architecture with proper separation of concerns

---

## üõ†Ô∏è Technologies & Concepts Used

### **Core Technologies**
```xml
<!-- Spring Boot Framework -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-parent</artifactId>
    <version>3.5.0</version>
</dependency>

<!-- Key Dependencies -->
- Spring Boot Starter Web          (REST APIs)
- Spring Boot Starter Data JPA     (Database Operations)
- Spring Boot Starter Security     (Authentication & Authorization)
- Spring Boot Starter Validation   (Input Validation)
- Spring Boot Starter Actuator     (Application Monitoring)
- MySQL Connector                   (Database Driver)
- Lombok                           (Boilerplate Code Reduction)
```

### **Java Concepts Implemented**
1. **Object-Oriented Programming** - Encapsulation, Inheritance, Abstraction
2. **Java 21 Features** - Record classes, Pattern matching, Modern syntax
3. **Annotations** - Extensive use of Spring and JPA annotations
4. **Exception Handling** - Custom exceptions and global exception handler
5. **Enums** - Type-safe constants for roles, account types, transaction types
6. **Optional Class** - Null-safe programming
7. **Stream API** - Functional programming for data processing
8. **Bean Validation** - JSR-303 validation annotations

### **Spring Boot Concepts**
1. **Dependency Injection** - Constructor and field injection
2. **Auto Configuration** - Spring Boot's automatic configuration
3. **Spring Security** - Authentication, authorization, password encoding
4. **Spring Data JPA** - Repository pattern, custom queries
5. **REST Controllers** - RESTful API design
6. **Exception Handling** - `@ControllerAdvice` for global exception handling
7. **Configuration Properties** - Environment-specific configurations
8. **Bean Lifecycle** - `@PostConstruct`, `@PreDestroy`

---

## üèóÔ∏è Architecture & Design Patterns

### **Layered Architecture**
```
‚îå‚îÄ‚îÄ‚îÄ Presentation Layer (Controllers) ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  ‚îú‚îÄ‚îÄ HomeController                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ UserController                    ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ TransactionController             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ Service Layer (Business Logic) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îú‚îÄ‚îÄ UserService                       ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ AccountService                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ TransactionService                ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ CustomUserDetailsService          ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ Repository Layer (Data Access) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îú‚îÄ‚îÄ UserRepository                    ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ AccountRepository                 ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ TransactionRepository             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ Entity Layer (Domain Models) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚îú‚îÄ‚îÄ User
   ‚îú‚îÄ‚îÄ Account
   ‚îî‚îÄ‚îÄ Transactions
```

### **Design Patterns Used**
1. **Repository Pattern** - Data access abstraction
2. **DTO Pattern** - Data transfer objects for API responses
3. **Builder Pattern** - Spring Security User builder
4. **Template Method Pattern** - JPA repository inheritance
5. **Strategy Pattern** - Different authentication strategies
6. **Facade Pattern** - Service layer facades for complex operations

---

## üóÑÔ∏è Database Design

### **Entity Relationship Diagram**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ      User       ‚îÇ 1‚îÄ‚îÄ‚îÄ1 ‚îÇ     Account     ‚îÇ 1‚îÄ‚îÄ‚îÄ* ‚îÇ  Transactions   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§       ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ userId (PK)     ‚îÇ       ‚îÇ accountNumber   ‚îÇ       ‚îÇ transactionId   ‚îÇ
‚îÇ fullName        ‚îÇ       ‚îÇ balance         ‚îÇ       ‚îÇ amount          ‚îÇ
‚îÇ email (UNIQUE)  ‚îÇ       ‚îÇ accountType     ‚îÇ       ‚îÇ type            ‚îÇ
‚îÇ password        ‚îÇ       ‚îÇ user_id (FK)    ‚îÇ       ‚îÇ time            ‚îÇ
‚îÇ role            ‚îÇ       ‚îÇ                 ‚îÇ       ‚îÇ account_id (FK) ‚îÇ
‚îÇ account_id (FK) ‚îÇ       ‚îÇ                 ‚îÇ       ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Database Concepts**
1. **Primary Keys** - UUID for User/Transaction, Sequential Long for Account
2. **Foreign Keys** - Proper referential integrity
3. **Unique Constraints** - Email uniqueness
4. **Cascade Operations** - CascadeType.ALL for related entities
5. **Fetch Strategies** - LAZY loading for performance
6. **Sequence Generation** - Custom account number generation starting from 1462000000

---

## üîê Security Implementation

### **Authentication & Authorization**
```java
@Configuration
@EnableWebSecurity
public class SecurityConfig {
    
    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) {
        return http
            .csrf(csrf -> csrf.disable())
            .httpBasic(basic -> {})  // Enable HTTP Basic Auth
            .authorizeHttpRequests(auth -> auth
                .requestMatchers("/api/signup", "/api/dashboard").permitAll()
                .requestMatchers("/user/**").hasRole("USER")
                .requestMatchers("/admin/**").hasRole("ADMIN")
                .anyRequest().authenticated()
            )
            .authenticationProvider(daoAuthenticationProvider())
            .build();
    }
}
```

### **Password Security**
- **BCrypt Hashing** - Industry-standard password hashing
- **Salt Generation** - Automatic salt generation for each password
- **Strength** - Default strength of 10 rounds

### **Access Control**
- **Method-Level Security** - `@PreAuthorize` annotations
- **Role-Based Access** - USER and ADMIN roles
- **Resource Protection** - Users can only access their own resources

---

## üìö API Documentation

### **Authentication Endpoints**

#### 1. User Registration
```http
POST /api/signup
Content-Type: application/json

{
    "fullName": "John Doe",
    "email": "john.doe@example.com",
    "password": "securePassword123",
    "role": "USER",
    "balance": 1000.0,
    "accountType": "SAVINGS"
}
```

**Response (201 Created):**
```json
{
    "userId": "123e4567-e89b-12d3-a456-426614174000",
    "fullName": "John Doe",
    "email": "john.doe@example.com",
    "role": "USER",
    "accountNumber": 1462000001,
    "balance": 1000.0,
    "accountType": "SAVINGS"
}
```

#### 2. Login (HTTP Basic Auth)
```http
GET /user/dashboard
Authorization: Basic base64(email:password)
```

### **User Management Endpoints**

#### 3. Get User Dashboard
```http
GET /user/dashboard
Authorization: Basic base64(email:password)
```
**Response:** `"This is User dashboard"`

#### 4. Check Account Balance
```http
GET /user/balance
Authorization: Basic base64(email:password)
```
**Response:**
```json
{
    "accountNumber": 1462000001,
    "balance": 1000.0,
    "accountType": "SAVINGS"
}
```

#### 5. Update User Profile
```http
PUT /user/{userId}
Authorization: Basic base64(email:password)
Content-Type: application/json

{
    "fullName": "John Smith",
    "email": "john.smith@example.com"
}
```

#### 6. Delete User Account
```http
DELETE /user/{userId}
Authorization: Basic base64(email:password)
```
**Response:** `"User Deleted"`

### **Transaction Endpoints**

#### 7. Deposit Money
```http
POST /transactions/deposit
Authorization: Basic base64(email:password)
Content-Type: application/json

1500.0
```
**Response:**
```json
{
    "transactionId": "trans-123e4567-e89b-12d3",
    "amount": 1500.0,
    "type": "DEPOSIT",
    "time": "2025-06-26T10:30:00",
    "accountNumber": 1462000001
}
```

#### 8. Withdraw Money
```http
POST /transactions/withdraw
Authorization: Basic base64(email:password)
Content-Type: application/json

500.0
```

#### 9. Transfer Money
```http
POST /transactions/transfer
Authorization: Basic base64(email:password)
Content-Type: application/json

{
    "senderAccountNumber": 1462000001,
    "recieverAccountNumber": 1462000002,
    "amount": 300.0
}
```

#### 10. Transaction History (Paginated)
```http
GET /transactions/history?page=0&size=10
Authorization: Basic base64(email:password)
```
**Response:**
```json
{
    "content": [
        {
            "transactionId": "trans-123",
            "amount": 1500.0,
            "type": "DEPOSIT",
            "time": "2025-06-26T10:30:00",
            "accountNumber": 1462000001
        }
    ],
    "pageable": {
        "pageNumber": 0,
        "pageSize": 10
    },
    "totalElements": 25,
    "totalPages": 3
}
```

### **Public Endpoints**

#### 11. General Dashboard
```http
GET /api/dashboard
```
**Response:** `"This is dashboard ! That is open to all"`

---

## üìÅ Project Structure

```
BankApplication/
‚îú‚îÄ‚îÄ src/main/java/com/BankProject/BankApplication/
‚îÇ   ‚îú‚îÄ‚îÄ BankApplication.java                    # Main Application Class
‚îÇ   ‚îú‚îÄ‚îÄ Auth/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SecurityConfig.java                 # Security Configuration
‚îÇ   ‚îú‚îÄ‚îÄ Controller/                             # REST Controllers
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HomeController.java                 # Authentication endpoints
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserController.java                 # User management endpoints
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TransactionController.java          # Transaction endpoints
‚îÇ   ‚îú‚îÄ‚îÄ Entity/                                 # JPA Entities
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.java                          # User entity
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Account.java                       # Account entity
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Transactions.java                 # Transaction entity
‚îÇ   ‚îú‚îÄ‚îÄ Enum/                                  # Enumerations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Role.java                          # USER, ADMIN
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccountType.java                   # CURRENT, SAVINGS
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TransactionTypes.java              # CREDIT, DEBIT, etc.
‚îÇ   ‚îú‚îÄ‚îÄ Exceptions/                            # Custom Exceptions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GlobalExceptionHandler.java        # Global exception handler
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ InsufficientAmountException.java   # Custom exceptions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserAlreadyExistsException.java
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ UserNotFoundException.java
‚îÇ   ‚îú‚îÄ‚îÄ Repository/                            # Data Access Layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserRepository.java                # User data operations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccountRepository.java             # Account data operations
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TransactionRepository.java         # Transaction data operations
‚îÇ   ‚îú‚îÄ‚îÄ Service/                               # Business Logic Layer
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserService.java                   # User business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AccountService.java                # Account business logic
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TransactionService.java            # Transaction business logic
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CustomUserDetailsService.java     # Spring Security integration
‚îÇ   ‚îî‚îÄ‚îÄ Utils/                                 # Utility Classes
‚îÇ       ‚îú‚îÄ‚îÄ CustomUserInfo.java               # User response DTO
‚îÇ       ‚îú‚îÄ‚îÄ ErrorResponse.java                 # Error response DTO
‚îÇ       ‚îú‚îÄ‚îÄ TransactionResponseDTO.java        # Transaction response DTO
‚îÇ       ‚îú‚îÄ‚îÄ TransferSlip.java                  # Transfer request DTO
‚îÇ       ‚îî‚îÄ‚îÄ UserAccountTemplate.java          # Registration request DTO
‚îú‚îÄ‚îÄ src/main/resources/
‚îÇ   ‚îú‚îÄ‚îÄ application.properties                 # Main configuration
‚îÇ   ‚îú‚îÄ‚îÄ static/                               # Static resources
‚îÇ   ‚îî‚îÄ‚îÄ templates/                            # Template files
‚îî‚îÄ‚îÄ pom.xml                                   # Maven configuration
```

---

## ‚öôÔ∏è Setup Instructions

### **Prerequisites**
- Java 21 or higher
- Maven 3.6+
- MySQL 8.0+
- IDE (IntelliJ IDEA/Eclipse/VS Code)
- Postman (for API testing)

### **Database Setup**
1. **Install MySQL** and create database:
```sql
CREATE DATABASE bank_management_system_springboot;
```

2. **Update application.properties:**
```properties
spring.application.name=BankApplication
spring.datasource.url=jdbc:mysql://localhost:3306/bank_management_system_springboot
spring.datasource.username=root
spring.datasource.password=your_password
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
logging.level.org.springframework.security=DEBUG
```

### **Run Application**
```bash
# Clone repository
git clone <repository-url>
cd BankApplication

# Run with Maven
mvn spring-boot:run

# Or run JAR file
mvn clean package
java -jar target/BankApplication-0.0.1-SNAPSHOT.jar
```

### **Test Setup**
1. Application starts on `http://localhost:8080`
2. Database tables are auto-created via Hibernate
3. Use Postman to test API endpoints
4. Create a user via `/api/signup`
5. Use email/password for Basic Auth in subsequent requests

---

## üß† Business Logic Explained

### **User Registration Process**
1. **Input Validation** - Email format, required fields
2. **Duplicate Check** - Email uniqueness validation
3. **Password Encoding** - BCrypt hashing
4. **Account Creation** - Automatic account generation
5. **Sequential Account Numbers** - Starting from 1462000000
6. **Role Assignment** - Default USER role
7. **Response Generation** - Return user info without sensitive data

### **Authentication Flow**
1. **HTTP Basic Auth** - Email as username, plain password
2. **User Lookup** - Find user by email (case-insensitive)
3. **Password Verification** - BCrypt comparison
4. **Authority Assignment** - Role-based authorities
5. **Security Context** - Store authenticated user

### **Transaction Processing**
1. **Authentication Check** - Verify user is logged in
2. **Account Validation** - Verify account exists and belongs to user
3. **Amount Validation** - Check positive amounts, sufficient balance
4. **Balance Updates** - Atomic balance operations
5. **Transaction Recording** - Create transaction record
6. **Response Generation** - Return transaction details

### **Transfer Logic**
1. **Account Validation** - Both sender and receiver accounts exist
2. **Ownership Verification** - Sender must own the source account
3. **Balance Check** - Sufficient funds in sender account
4. **Atomic Transaction** - Debit sender, credit receiver
5. **Transaction Records** - Create records for both accounts
6. **Success Response** - Return transfer confirmation

---

## ‚ö†Ô∏è Error Handling

### **Common Error Responses**
```json
// 400 Bad Request - Validation Error
{
    "error": "VALIDATION_ERROR",
    "message": "Email is required",
    "timestamp": "2025-06-26T10:30:00"
}

// 401 Unauthorized - Authentication Failed
{
    "error": "AUTHENTICATION_FAILED",
    "message": "Invalid email or password"
}

// 403 Forbidden - Access Denied
{
    "error": "ACCESS_DENIED",
    "message": "You don't have permission to access this resource"
}

// 404 Not Found - Resource Not Found
{
    "error": "USER_NOT_FOUND",
    "message": "User with email john@example.com not found"
}

// 500 Internal Server Error
{
    "error": "INTERNAL_SERVER_ERROR",
    "message": "An unexpected error occurred"
}
```

---
*Last Updated: June 26, 2025*
